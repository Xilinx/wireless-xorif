<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ORAN-RADIO-IF: XORIF-APP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="html_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xlogo_bg.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ORAN-RADIO-IF
   </div>
   <div id="projectbrief">ORAN Radio Interface Software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">XORIF-APP </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>XORIF-APP Source Directory</h2>
<ul>
<li>This directory contains the source files and Makefile for the ORAN-Radio-Interface Example Application (xorif-app)</li>
<li>The xorif-app is an example application, which uses the libxorif library to interface with the Front Haul Interface and Beam-Former hardware. The xorif-app also demonstrates the handling of some eCPRI management messages, such as OWDM (One-Way Delay Measurement).</li>
<li>The xorif-app can operate as either a "server" or a "client".<ul>
<li>As a server, the xorif-app will provide a communication interface (via TCP/IP sockets) which will accept messages (e.g. from an xorif-app client).</li>
<li>As a client, the xorif-app can be use to connect with an xorif-app server. The client can operate in several modes, including "command line mode", "menu mode", or "file mode".</li>
<li>Only the xorif-app server mode can communicate directly with the h/w via the libxorif library.</li>
</ul>
</li>
</ul>
<h3>Building</h3>
<ul>
<li>The xorif-app executable is built as part of the PetaLinux build system, and can be found in the <code>/usr/bin/</code> directory of the target Linux installation.</li>
<li>It can also be built separately using an appropriate SDK including the cross-compilation tools and dependencies (e.g. libmetal library).<ul>
<li>Run: <code>make</code></li>
</ul>
</li>
<li>A client-only version of the xorif-app executable can also be be built on a host Linux system, using native compilation tools and without dependency on the libmetal library.<ul>
<li>Run: <code>make NO_HW=1</code></li>
</ul>
</li>
</ul>
<h3>Usage</h3>
<div class="fragment"><div class="line">Usage: [-hv] [-c | -f &lt;file&gt; | -m | -s] [-n &lt;ip_addr&gt;] [-p &lt;port&gt;] [-e &lt;device&gt;] {<span class="stringliteral">&quot;&lt;command&gt; {&lt;arguments&gt;}&quot;</span>}</div>
<div class="line">    -c Client mode <span class="keyword">using</span> the command line</div>
<div class="line">    -e &lt;device&gt; Specified ethernet device (<span class="keywordflow">default</span> eth0)</div>
<div class="line">    -f &lt;file&gt; Client mode <span class="keyword">using</span> the specified file</div>
<div class="line">    -h Show help</div>
<div class="line">    -m Client mode <span class="keyword">using</span> console menu</div>
<div class="line">    -n &lt;ip_addr&gt; Specified IP address (<span class="keywordflow">for</span> client mode) (defaults to localhost)</div>
<div class="line">    -p &lt;port&gt; Specified port (defaults to 5001)</div>
<div class="line">    -s Server mode (<span class="keywordflow">default</span>)</div>
<div class="line">    -v Verbose</div>
<div class="line">    &lt;commands&gt; {&lt;arguments&gt;} For command line mode only</div>
</div><!-- fragment --><ul>
<li>Server mode:<ul>
<li>Typical usage: <code>xorif-app -s</code></li>
<li>Use <code>-s</code> for server mode (note, this is the default and so not necessary in most cases)</li>
<li>Use <code>-p</code> to change the TCP/IP port number</li>
<li>Use <code>-e</code> to change the ethernet device name (when using time-stamping)</li>
</ul>
</li>
<li>Client mode:<ul>
<li>Typical usage: <code>xorif-app -n 192.168.0.55 -m</code></li>
<li>Use <code>-m</code> for "menu mode" (this is a simple console-based menu system)</li>
<li>Use <code>-c</code> for "command-line mode" (runs commands specified on the command line, e.g. <code>xorif-app -c "get bf_hw_version" "get fhi_hw_version"</code>)</li>
<li>Use <code>-f</code> for "file mode" (runs commands specified in a text file)</li>
<li>Use <code>-n</code> to set the IP address (default is the localhost, i.e. 127.0.0.1)</li>
<li>Use <code>-p</code> to change the TCP/IP port number</li>
</ul>
</li>
</ul>
<h3>Menu Mode</h3>
<ul>
<li>This mode allows basic configuration and interaction with the system using a simple text-based menu.</li>
<li>There are several different sub-menus, which can be easily navigated using the console.<ul>
<li>"XORIF-APP Main Menu"</li>
<li>"XORIF-APP Component Carrier Configuration Menu"</li>
<li>"XORIF-APP Ethernet Configuration Menu"</li>
<li>"XORIF-APP Read/Write Register Menu"</li>
</ul>
</li>
<li>Usage:<ul>
<li>Ensure that an instance of the xorif-app "server" is running on the target hardware, e.g. <code>xorif-app -s</code>.</li>
<li>Start an instance of the xorif-app "client", specifying the IP address of the "server", e.g. <code>xorif-app -n 192.168.0.55 -m</code>.</li>
<li>Use the menus to configure and interact with the system.</li>
</ul>
</li>
<li>Example: <div class="fragment"><div class="line">XORIF-APP Main Menu</div>
<div class="line">===================</div>
<div class="line">  1) Versions</div>
<div class="line">  2) Capabilities</div>
<div class="line">  3) Component carrier configuration</div>
<div class="line">  4) Ethernet configuration</div>
<div class="line">  5) Read/write registers and memory</div>
<div class="line">  6) Read stats / counters</div>
<div class="line">  7) Debug trace</div>
<div class="line">  8) Reset FHI</div>
<div class="line">100) Exit</div>
<div class="line"></div>
<div class="line">Enter :</div>
</div><!-- fragment --></li>
</ul>
<h3>Command-Line Mode</h3>
<ul>
<li>This mode allows basic configuration and interaction with the system using the xorif-app command line.</li>
<li>Usage:<ul>
<li>Ensure that an instance of the xorif-app "server" is running on the target hardware, e.g. <code>xorif-app -s</code></li>
<li>Start an instance of the xorif-app "client", specifying the IP address of the "server" and the command e.g. <code>xorif-app -n 192.168.0.55 -c "get sw_version"</code>.</li>
</ul>
</li>
<li>It is also possible to send multiple commands on the same command line. Because of the way command line arguments are handled, each command should be enclosed in quotes, e.g. <code>xorif-app -n 192.168.0.55 -c "get sw_version" "get fhi_hw_version"</code>.</li>
<li>See the section below on "Command Syntax" for details of the command syntax.</li>
</ul>
<h3>Command Syntax</h3>
<div class="fragment"><div class="line">help : help [&lt;topic&gt;]</div>
<div class="line">init : init [&lt;device&gt; &lt;device&gt;]</div>
<div class="line">finish : finish</div>
<div class="line">reset : reset [fhi]</div>
<div class="line">has : has [fhi]</div>
<div class="line"><span class="keyword">get</span> : <span class="keyword">get</span>...</div>
<div class="line">        <span class="keyword">get</span> sw_version</div>
<div class="line">        <span class="keyword">get</span> fhi_hw_version</div>
<div class="line">        <span class="keyword">get</span> fhi_hw_revision</div>
<div class="line">        <span class="keyword">get</span> capabilities</div>
<div class="line">        <span class="keyword">get</span> fhi_caps</div>
<div class="line">        <span class="keyword">get</span> cc_config &lt;cc&gt;</div>
<div class="line">        <span class="keyword">get</span> fhi_cc_alloc &lt;cc&gt;</div>
<div class="line">        <span class="keyword">get</span> fhi_stats</div>
<div class="line">        <span class="keyword">get</span> state</div>
<div class="line">        <span class="keyword">get</span> fhi_alarms</div>
<div class="line">set : set...</div>
<div class="line">        set num_rbs &lt;cc&gt; &lt;number of rbs&gt;</div>
<div class="line">        set numerology &lt;cc&gt; &lt;numerology&gt; &lt;extended CP&gt;</div>
<div class="line">        set time_advance &lt;cc&gt; &lt;deskew&gt; &lt;advance up-link&gt; &lt;advance down-link&gt;</div>
<div class="line">        dl_iq_compression &lt;cc&gt; &lt;width&gt; &lt;compression method&gt;</div>
<div class="line">        ul_iq_compression &lt;cc&gt; &lt;width&gt; &lt;compression method&gt;</div>
<div class="line">        bw_compression &lt;cc&gt; &lt;width&gt; &lt;compression method&gt;</div>
<div class="line">        dest_mac_addr &lt;port&gt; &lt;address&gt;</div>
<div class="line">        src_mac_addr &lt;port&gt; &lt;address&gt;</div>
<div class="line">clear : clear...</div>
<div class="line">        clear fhi_alarms</div>
<div class="line">configure : configure &lt;cc&gt;</div>
<div class="line">enable : enable &lt;cc&gt;</div>
<div class="line">disable : disable &lt;c&gt;</div>
<div class="line"><a class="code" href="group__libxorif.html#ga147fd1db172352c14190b02e839f5eb8">read_reg</a> : <a class="code" href="group__libxorif.html#ga147fd1db172352c14190b02e839f5eb8">read_reg</a> [fhi] &lt;<a class="code" href="structreg__info.html#a4a6b00247b1294d70d5a5db2eeb447d2">name</a>&gt;</div>
<div class="line"><a class="code" href="group__libxorif.html#ga78f31d507383b0817c4522da764fc215">read_reg_offset</a> : <a class="code" href="group__libxorif.html#ga78f31d507383b0817c4522da764fc215">read_reg_offset</a> [fhi] &lt;<a class="code" href="structreg__info.html#a4a6b00247b1294d70d5a5db2eeb447d2">name</a>&gt; &lt;offset&gt;</div>
<div class="line"><a class="code" href="group__libxorif.html#gab34e2df3944f0b394cd49236b09c0d37">write_reg</a> : <a class="code" href="group__libxorif.html#gab34e2df3944f0b394cd49236b09c0d37">write_reg</a> [fhi] &lt;<a class="code" href="structreg__info.html#a4a6b00247b1294d70d5a5db2eeb447d2">name</a>&gt; &lt;value&gt;</div>
<div class="line"><a class="code" href="group__libxorif.html#ga2fc826998901a1b3c12a04305e904463">write_reg_offset</a> : <a class="code" href="group__libxorif.html#ga2fc826998901a1b3c12a04305e904463">write_reg_offset</a> [fhi] &lt;<a class="code" href="structreg__info.html#a4a6b00247b1294d70d5a5db2eeb447d2">name</a>&gt; &lt;offset&gt; &lt;value&gt;</div>
<div class="line">quit : quit</div>
<div class="line">ecpri : (Use <span class="stringliteral">&#39;ecpri help&#39;</span> <span class="keywordflow">for</span> additional help and usage information)</div>
<div class="line">peek : peek &lt;address&gt;</div>
<div class="line">poke : poke &lt;address&gt; &lt;value&gt;</div>
<div class="line">debug : debug &lt;level&gt;</div>
</div><!-- fragment --><ul>
<li>When executing a command, the app will echo the command and it's status, e.g. <code>set num_rbs 0 275 =&gt; status = 0</code><ul>
<li>Status value of 0 means good/pass and any non-zero value is an error code</li>
</ul>
</li>
<li>Some commands also provide additional information, for example... <div class="fragment"><div class="line"><span class="keyword">get</span> fhi_caps =&gt; status = 0</div>
<div class="line">Num framer antennas = 4</div>
<div class="line">Num deframer antennas = 4</div>
<div class="line">Num ethernet ports = 4</div>
<div class="line">Max component carriers = 4</div>
<div class="line">Max number down-link data symbols = 6</div>
<div class="line">Max size framer ethernet payload = 1024</div>
<div class="line">Max size deframer ethernet payload = 1024</div>
<div class="line">Maximum sub-carriers = 6600</div>
<div class="line">Maximum num ctrl symbols per CC = 13</div>
<div class="line">Maximum up-link ctrl 1k words = 4</div>
<div class="line">Maximum down-link ctrl 1k words = 4</div>
<div class="line">Maximum down-link data 1k words = 6</div>
<div class="line">Timer clk period in pico-seconds = 2500</div>
<div class="line">Number of unsolicited framer ports = 1</div>
<div class="line">Number of PRACH framer ports = 1</div>
</div><!-- fragment --></li>
<li>Many of the commands map directly on to the libxorif library API calls. Others, such as "help" and "quit" are handled locally.</li>
</ul>
<h3>File Mode</h3>
<ul>
<li>This mode allows basic configuration and interaction with the system using a text file.</li>
<li>Usage:<ul>
<li>Ensure that an instance of the xorif-app "server" is running on the target hardware, e.g. <code>xorif-app -s</code></li>
<li>Start an instance of the xorif-app "client", specifying the IP address of the "server" and the command e.g. <code>xorif-app -n 192.168.0.55 -f config1.txt</code></li>
</ul>
</li>
<li>File format:<ul>
<li>A plain text file</li>
<li>A maximum of one command per line</li>
<li>Line breaks in the middle of commands are not permitted</li>
<li>Blank lines are skipped</li>
<li>Hash characters ("#") can be used to provide comment lines in the file</li>
<li>Command syntax is the same as described above</li>
</ul>
</li>
<li>Example file (input): <div class="fragment"><div class="line"><span class="preprocessor"># Check versions</span></div>
<div class="line"><span class="preprocessor"></span><span class="keyword">get</span> sw_version</div>
<div class="line"><span class="keyword">get</span> fhi_hw_version</div>
<div class="line"><span class="keyword">get</span> bf_hw_revision</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># Configure CC#0 num_rbs=275, numerology=1</span></div>
<div class="line"><span class="preprocessor"></span>set num_rbs 0 275</div>
<div class="line">set numerology 0 1 0</div>
<div class="line">set time_advance 0 30 90 90</div>
<div class="line">set dl_iq_compression 0 9 1</div>
<div class="line">set ul_iq_compression 0 9 1</div>
<div class="line">configure 0</div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># Configure CC#1 num_rbs=100, numerology=0</span></div>
<div class="line"><span class="preprocessor"></span>set num_rbs 1 100</div>
<div class="line">set numerology 1 0 0</div>
<div class="line">set time_advance 1 30 90 90</div>
<div class="line">set dl_iq_compression 1 9 1</div>
<div class="line">set ul_iq_compression 1 9 1</div>
<div class="line">configure 1</div>
</div><!-- fragment --></li>
<li>Example file (output): <div class="fragment"><div class="line">init =&gt; status = 0</div>
<div class="line"><span class="keyword">get</span> sw_version =&gt; status = 0</div>
<div class="line">result = 0x01000000</div>
<div class="line"><span class="keyword">get</span> fhi_hw_version =&gt; status = 0</div>
<div class="line">result = 0x01000000</div>
<div class="line"><span class="keyword">get</span> bf_hw_revision =&gt; status = 0</div>
<div class="line">result = 0x00000000</div>
<div class="line">set num_rbs 0 275 =&gt; status = 0</div>
<div class="line">set numerology 0 1 0 =&gt; status = 0</div>
<div class="line">set time_advance 0 30 90 90 =&gt; status = 0</div>
<div class="line">set dl_iq_compression 0 9 1 =&gt; status = 0</div>
<div class="line">set ul_iq_compression 0 9 1 =&gt; status = 0</div>
<div class="line">configure 0 =&gt; status = 0</div>
<div class="line">set num_rbs 1 100 =&gt; status = 0</div>
<div class="line">set numerology 1 0 0 =&gt; status = 0</div>
<div class="line">set time_advance 1 30 90 90 =&gt; status = 0</div>
<div class="line">set dl_iq_compression 1 9 1 =&gt; status = 0</div>
<div class="line">set ul_iq_compression 1 9 1 =&gt; status = 0</div>
<div class="line">configure 1 =&gt; status = 0</div>
</div><!-- fragment --></li>
</ul>
<h3>File Mode Simple Starter and PG370 examples</h3>
<ul>
<li>Simple Uncompressed data example (input):<ul>
<li>This is a good config to get started with. Limit to one Component Carrier, 1 Spatial Stream and a limited number of RB'S.</li>
<li>Compared to the detail in the PG370, using the API removes the need to manually program these registers.</li>
<li>Set debug to 1 to see the complete listing of all writes to the core for a deeper understanding of configuration. <div class="fragment"><div class="line">set debug                1</div>
<div class="line">set cc_numerology        0 0 0</div>
<div class="line">set cc_num_rbs           0 20</div>
<div class="line">set cc_ul_iq_compression 0 0 0</div>
<div class="line">set cc_dl_iq_compression 0 0 0</div>
<div class="line">set cc_time_advance      0 160 100 100</div>
<div class="line">configure_cc             0</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>PG370 "Configuring the Core" Example file (input): <div class="fragment"><div class="line">set cc_numerology        0 1 0</div>
<div class="line">set cc_num_rbs           0 275</div>
<div class="line">set cc_ul_iq_compression 0 9 1</div>
<div class="line">set cc_dl_iq_compression 0 9 1</div>
<div class="line">set cc_time_advance      0 30 90 90</div>
<div class="line">configure_cc             0</div>
<div class="line"></div>
<div class="line">set cc_numerology        1 1 0</div>
<div class="line">set cc_num_rbs           1 275</div>
<div class="line">set cc_ul_iq_compression 1 9 1</div>
<div class="line">set cc_dl_iq_compression 1 9 1</div>
<div class="line">set cc_time_advance      1 30 90 90</div>
<div class="line">configure_cc             1</div>
</div><!-- fragment --></li>
<li>PG370 "Reconfiguring the Core" Example file (input): <div class="fragment"><div class="line">set cc_numerology        0 0 0</div>
<div class="line">set cc_num_rbs           0 275</div>
<div class="line">set cc_ul_iq_compression 0 9 1</div>
<div class="line">set cc_dl_iq_compression 0 9 1</div>
<div class="line">set cc_time_advance      0 30 90 90</div>
<div class="line">configure_cc             0</div>
<div class="line"></div>
<div class="line">set cc_numerology        1 1 0</div>
<div class="line">set cc_num_rbs           1 137</div>
<div class="line">set cc_ul_iq_compression 1 9 1</div>
<div class="line">set cc_dl_iq_compression 1 9 1</div>
<div class="line">set cc_time_advance      1 30 90 90</div>
<div class="line">configure_cc             1</div>
<div class="line"></div>
<div class="line">set cc_numerology        2 1 0</div>
<div class="line">set cc_num_rbs           2 137</div>
<div class="line">set cc_ul_iq_compression 2 9 1</div>
<div class="line">set cc_dl_iq_compression 2 9 1</div>
<div class="line">set cc_time_advance      2 30 90 90</div>
<div class="line">configure_cc             2</div>
</div><!-- fragment --></li>
</ul>
<hr/>
<p>Copyright (C) 2019 - 2020 Xilinx, Inc. All rights reserved. </p>
</div></div><!-- contents -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright &copy; 2020 Xilinx Inc. All rights reserved.</li>
  </ul>
</div>
</body>
</html>
